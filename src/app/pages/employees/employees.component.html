<div class="panel panel-default">
  <div class="panel-heading">
    <h2 class="panel-title">List Employee</h2>
  </div>

  <!-- Button Add New -->
  <div class="panel-body">
    <div class="row">
      <div class="form-group col-md-12">
        <button type="button" class="btn btn-primary pull-right" (click)="openModalAdd(templateAdd)">Add New</button>
      </div>

      <ng-template #templateAdd>
        <!-- Form Add Employee -->
        <div class="modal-header">
          <h4 class="modal-title pull-left">Add Employee</h4>
          <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>

        <div class="modal-body">
            <form class="employee-form" #employeeForm="ngForm" ngNativeValidate (ngSubmit)="onSubmit(employeeForm)">

            <div class="row">
                <div class="form-group col-md-6" 
                     [class.has-error]="code.invalid && code.touched">
                  <label for="code">*EmployeeIdNumber</label>
                  <input class=form-control  
                         placeholder="Type Employee Id Number" 
                         name="code" 
                         #code="ngModel" 
                         [(ngModel)]="_employeeService.selectedEmployee.code" 
                         required minlength="4" >
                  <span class="help-block" *ngIf="code.invalid && code.touched">username is required</span>
                    </div>

                  <div class="form-group col-md-6">
                    <label for="mCompanyId">*Company Name</label>
                    <select class="form-control" name="mCompanyId" id="mCompanyId" #mCompanyId="ngModel" [(ngModel)]="_employeeService.companyList.mCompanyId">
                      <option *ngFor="let option of _employeeService.companyList" value="{{option._id}}">{{option.name}}</option>
                    </select>

                    <!-- <select class="form-control" name="mCompanyId" id="mCompanyId"  #mCompanyId="ngModel" [(ngModel)]="_employeeService.selectedCompany.mCompanyId">
                      <option *ngFor="let option of _employeeService.companyList"  value="{{option.code}}">{{option.name}}</option>
                    </select> -->
                  </div>

                  <div class="form-group col-md-6">
                    <label for="firstName">*First Name </label>
                    <input class=form-control placeholder=TypeFirstName name="firstName" #firstName="ngModel" [(ngModel)]="_employeeService.selectedEmployee.firstName" required minlength="2"
                    appForbiddenName="bob" >
                      </div>
                  
                  <div class="form-group col-md-6">
                        <label for="email" class="control-label">Email</label>
                        <input required  
                               class=form-control 
                               placeholder= "Type Email"  
                               name="email" 
                               #email="ngModel" 
                               [(ngModel)]="_employeeService.selectedEmployee.email"  
                               type="text" 
                               pattern="^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+[a-zA-Z0-9-.]+$">
                        <div class="help-block" *ngIf="email.errors.required && email.touched">
                        <div [hidden]=!email.errors.minlength>min length 8 char</div>
                        <!-- <div [hidden]=!email.errors.pattern>Username combination requiredr</div> -->
                      </div>
                    </div>
                          
                               <!-- <span class="help-block" *ngIf="email.errors?.required && email.touched">
                            Email is required
                          </span>
                          <span class="help-block" *ngIf="email.errors?.email && email.touched">
                            Email is invalid
                          </span> -->
                    
                      

                  <div class="form-group col-md-6">
                    <label for="lastName">lastName</label>
                    <input class=form-control placeholder=TypelastName name="lastName" #lastName="ngModel" [(ngModel)]="_employeeService.selectedEmployee.lastName" required minlength="4"
                    appForbiddenName="bob" >
                      </div>
                </div>
            
                <div class="row">
                  <div class="form-group col-md-4">
                    <button type="submit" class="btn btn-lg btn-block btn-info">Submit</button>
                  </div>
                  <div *ngIf="isNew" class="form-group col-md-4">
                    <button type="button" class="btn btn-lg btn-block btn-secondary" (click)="resetForm(employeeForm)">Reset</button>
                  </div>
                  <div class="form-group col-md-4">
                    <button type="button" class="btn btn-lg btn-block btn-warning" (click)="this.modalRef.hide()">Cancel</button>
                  </div>
                </div>

            </form>
        </div>
      </ng-template>

      <!-- List Bar -->
      <div class="row">
          <div class="form-group col-md-2">
              <input class=form-control type="number" placeholder=EmployeeIdNumber name="code" [(ngModel)]="_employeeService.selectedEmployee.code">
            </div>
            <div class="form-group col-md-2">
                <input class=form-control placeholder=EmployeeName name="firstName" #firstName="ngModel" [(ngModel)]="_employeeService.selectedEmployee.firstName"> 
              </div>
          <div class="form-group col-md-2">
            <select class="form-control" name="mCompanyId" id="mCompanyId"  #mCompanyId="ngModel" [(ngModel)]="_employeeService.selectedCompany.mCompanyId">
              
              <option *ngFor="let option of _employeeService.companyList"  value="{{option.code}}">{{option.name}}</option>
            </select>
          </div>
          <div class="form-group col-md-2">
              <input type="datetime-local" class="form-control" placeholder="CreatedDate" name="createdDate" #createdDate="ngModel" [(ngModel)]="_employeeService.selectedEmployee.createdDate">
          </div>
          
          <div class="form-group col-md-2">
              <input class=form-control placeholder=CreatedBy  name="createdBy" #createdBy="ngModel" [(ngModel)]="_employeeService.selectedEmployee.createdBy"> 
          </div>
          <div class="form-group col-md-2">
            <button type="button" class="btn btn-warning btn-block">Search</button>
          </div>
        </div>
 


<table class="table table-bordered">
  <thead>
    <tr>
      <th>No.</th>
      <th>Employee Id Number</th>
      <th>Employee Name</th>
      <th>Company Name</th>
      <th>Create Date</th>
      <th>Create By</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let employee of _employeeService.employeeList; let i = index">
      <td>{{ i + 1 }}</td>
      <td>{{employee.code }}</td>
      <td>{{employee.firstName}} {{employee.lastName}}</td>
      <td>{{employee.mCompanyId}}</td>
      <td>{{employee.createdDate | date:"medium"}}</td>
      <td>{{employee.createdBy}}</td>
     
        <!-- View Icon-->
          <td class="text-center">
              <button type="button" class="btn btn-default btn-sm" (click)="onView(templateView, employee._id)">
                <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                <ng-template #templateView>
                  <div class="modal-header">
                    <h4 class="modal-title pull-left">View Employee</h4>
                    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <form class="employee-form" #employeeForm="ngForm">
                      <input type="hidden" name="_id" #_id="ngModel" [(ngModel)]="_employeeService.selectedEmployee._id">
                      
                      <div class="row">
                        <div class="form-group col-md-6">
                          <label for="code">*EmployeeIdNumber</label>
                          <input class="form-control" readonly name="code" #code="ngModel" [(ngModel)]="_employeeService.selectedEmployee.code" >
                        </div>

                        <div class="form-group col-md-6">
                          <label for="mCompanyId">*Company Name</label>
                          <input class="form-control" readonly name="mCompanyId" #mCompanyId="ngModel" [(ngModel)]="_employeeService.selectedEmployee.mCompanyId">
                        </div>
                      
                        <div class="form-group col-md-6">
                          <label for="firstName">*First Name</label>
                          <input class="form-control" readonly name="firstName" #firstName="ngModel" [(ngModel)]="_employeeService.selectedEmployee.firstName">
                        </div>
                      
                        <div class="form-group col-md-6">
                          <label for="email">Email</label>
                          <input class="form-control" readonly name="email" #email="ngModel" [(ngModel)]="_employeeService.selectedEmployee.email">
                        </div>
                      
                        <div class="form-group col-md-6">
                          <label for="lastName">Last Name</label>
                          <input class="form-control" readonly name="lastName" #lastName="ngModel" [(ngModel)]="_employeeService.selectedEmployee.lastName">
                        </div>

                      </div>
                      
                        <div class="row">
                        <div class="form-group col-md-6">
                          <button type="button" class="btn btn-lg btn-block btn-warning" (click)="this.modalRef.hide()">Close</button>
                        </div>
                      </div>
                    </form>
                  </div>
                </ng-template>
              </button>
              <!-- End View Icon -->
       <!-- EDIT ICON -->
       <button type="button" class="btn btn-default btn-sm" (click)="onEdit(templateEdit, employee._id)">
          <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
          <ng-template #templateEdit>
                  <div class="modal-header">
                    <h4 class="modal-title pull-left">Edit Employee</h4>
                    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <form class="employee-form" #employeeForm="ngForm" (ngSubmit)="onSubmit(employeeForm)">
                      <input type="hidden" name="_id" #_id="ngModel" [(ngModel)]="_employeeService.selectedEmployee._id">
                      <div class="row">
                        <div class="form-group col-md-6">
                          <label for="code">*EmployeeIdNumber</label>
                          <input class="form-control"  name="code" #code="ngModel" [(ngModel)]="_employeeService.selectedEmployee.code"  required minlength="12"
                          appForbiddenName="bob">
                        </div>
                     
                        <div class="form-group col-md-6">
                            <label for="mCompanyId">*Company Name</label>
                            <select class="form-control" name="mCompanyId" id="mCompanyId" #mCompanyId="ngModel" [(ngModel)]="_employeeService.companyList.mCompanyId">
                              <option *ngFor="let option of _employeeService.companyList" value="{{option._id}}">{{option.name}}</option>
                            </select>
                          </div>
                      
                        <div class="form-group col-md-6">
                          <label for="firstName">*First Name</label>
                          <input class="form-control" name="firstName" #firstName="ngModel" [(ngModel)]="_employeeService.selectedEmployee.firstName">
                        </div>
                      
                     
                        <div class="form-group col-md-6">
                          <label for="lastName">Last Name</label>
                          <input class="form-control" name="lastName" #lastName="ngModel" [(ngModel)]="_employeeService.selectedEmployee.lastName">
                        </div>
                      
                        <div class="form-group col-md-6">
                          <label for="email">Email</label>
                          <input class="form-control" name="email" #email="ngModel" [(ngModel)]="_employeeService.selectedEmployee.email">
                        </div>
                      </div>


                        <div class="row">
                        <div class="form-group col-md-3">
                            <button type="submit" class="btn btn-lg btn-block btn-info">Update</button>
                          </div>
                        <div class="form-group col-md-3">
                          <button type="button" class="btn btn-lg btn-block btn-warning" (click)="this.modalRef.hide()">Close</button>
                        </div>
                      </div>
                    </form>
                  </div>
                </ng-template>
              </button>
        <!-- END EDIT ICON -->
       
            <!-- DELETE ICON -->
            <button type="button" class="btn btn-default btn-sm" (click)="onDelete(employee._id, employee)">
              <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
              <ng-template #templateDelete>
                <div class="modal-header">
                  <h4 class="modal-title pull-left">Delete employee</h4>
                  <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <h4 class="text-center">Are you sure to delete this?</h4>
                  <div class="row">
                    <div class="form-group col-md-6">
                      <button type="submit" class="btn btn-block btn-info" (click)="onDelete(employee._id)">Delete</button>
                    </div>
                    <div class="form-group col-md-6">
                      <button type="button" class="btn btn-block btn-warning" (click)="this.modalRef.hide()">Cancel</button>
                    </div>
                  </div>
                </div>
              </ng-template>
            </button>
            <!-- END DELETE -->
      </td>
    </tr>
  </tbody>
</table>
</div>